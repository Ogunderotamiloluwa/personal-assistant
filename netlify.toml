# Netlify Configuration for Frontend Deployment
# Free tier compatible

[build]
  command = "cd frontend && npm install && npm run build"
  publish = "frontend/dist"

# IMPORTANT: Set VITE_API_URL in Netlify UI:
# Site settings → Build & deploy → Environment → Edit variables
# Set: VITE_API_URL = https://persona-assistant-backend.onrender.com

# Redirect all other requests to index.html for SPA routing
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Fix MIME type headers for assets
[[headers]]
  for = "/assets/*.js"
  [headers.values]
    Content-Type = "application/javascript; charset=utf-8"

[[headers]]
  for = "/assets/*.css"
  [headers.values]
    Content-Type = "text/css; charset=utf-8"

[[headers]]
  for = "*.js"
  [headers.values]
    Content-Type = "application/javascript; charset=utf-8"
